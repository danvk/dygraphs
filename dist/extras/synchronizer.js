"use strict";

/**
 * @license
 * Part of dygraphs, see top-level LICENSE.txt file
 * MIT-licenced: https://opensource.org/licenses/MIT
 */

/**
 * Synchronize zooming and/or selections between a set of dygraphs.
 *
 * Usage:
 *
 *   var g1 = new Dygraph(...),
 *       g2 = new Dygraph(...),
 *       ...;
 *   var sync = Dygraph.synchronize(g1, g2, ...);
 *   // charts are now synchronized
 *   sync.detach();
 *   // charts are no longer synchronized
 *
 * You can set options using the last parameter, for example:
 *
 *   var sync = Dygraph.synchronize(g1, g2, g3, {
 *      selection: true,
 *      zoom: true
 *   });
 *
 * The default is to synchronize both of these.
 *
 * Instead of passing one Dygraph object as each parameter, you may also pass an
 * array of dygraphs:
 *
 *   var sync = Dygraph.synchronize([g1, g2, g3], {
 *      selection: false,
 *      zoom: true
 *   });
 *
 * You may also set `range: false` if you wish to only sync the x-axis.
 * The `range` option has no effect unless `zoom` is true (the default).
 */

/* loader wrapper to allow browser use and ES6 imports */
(function _extras_synchronizer_closure() {
  'use strict';

  var Dygraph;
  if (window.Dygraph) {
    Dygraph = window.Dygraph;
  } else if (typeof module !== 'undefined') {
    Dygraph = require('../dygraph');
    if (typeof Dygraph.NAME === 'undefined' && typeof Dygraph["default"] !== 'undefined') Dygraph = Dygraph["default"];
  }
  /* end of loader wrapper header */

  var synchronize = function synchronize( /* dygraphs..., opts */
  ) {
    if (arguments.length === 0) {
      throw 'Invalid invocation of Dygraph.synchronize(). Need >= 1 argument.';
    }
    var OPTIONS = ['selection', 'zoom', 'range'];
    var opts = {
      selection: true,
      zoom: true,
      range: true
    };
    var dygraphs = [];
    var prevCallbacks = [];
    var parseOpts = function parseOpts(obj) {
      if (!(obj instanceof Object)) {
        throw 'Last argument must be either Dygraph or Object.';
      } else {
        for (var i = 0; i < OPTIONS.length; i++) {
          var optName = OPTIONS[i];
          if (obj.hasOwnProperty(optName)) opts[optName] = obj[optName];
        }
      }
    };
    if (arguments[0] instanceof Dygraph) {
      // Arguments are Dygraph objects.
      for (var i = 0; i < arguments.length; i++) {
        if (arguments[i] instanceof Dygraph) {
          dygraphs.push(arguments[i]);
        } else {
          break;
        }
      }
      if (i < arguments.length - 1) {
        throw 'Invalid invocation of Dygraph.synchronize(). ' + 'All but the last argument must be Dygraph objects.';
      } else if (i == arguments.length - 1) {
        parseOpts(arguments[arguments.length - 1]);
      }
    } else if (arguments[0].length) {
      // Invoked w/ list of dygraphs, options
      for (var i = 0; i < arguments[0].length; i++) {
        dygraphs.push(arguments[0][i]);
      }
      if (arguments.length == 2) {
        parseOpts(arguments[1]);
      } else if (arguments.length > 2) {
        throw 'Invalid invocation of Dygraph.synchronize(). ' + 'Expected two arguments: array and optional options argument.';
      } // otherwise arguments.length == 1, which is fine.
    } else {
      throw 'Invalid invocation of Dygraph.synchronize(). ' + 'First parameter must be either Dygraph or list of Dygraphs.';
    }
    if (dygraphs.length < 2) {
      throw 'Invalid invocation of Dygraph.synchronize(). ' + 'Need two or more dygraphs to synchronize.';
    }
    var readycount = dygraphs.length;
    for (var i = 0; i < dygraphs.length; i++) {
      var g = dygraphs[i];
      g.ready(function onReady_() {
        if (--readycount == 0) {
          // store original callbacks
          var callBackTypes = ['drawCallback', 'highlightCallback', 'unhighlightCallback'];
          for (var j = 0; j < dygraphs.length; j++) {
            if (!prevCallbacks[j]) {
              prevCallbacks[j] = {};
            }
            for (var k = callBackTypes.length - 1; k >= 0; k--) {
              prevCallbacks[j][callBackTypes[k]] = dygraphs[j].getFunctionOption(callBackTypes[k]);
            }
          }

          // Listen for draw, highlight, unhighlight callbacks.
          if (opts.zoom) {
            attachZoomHandlers(dygraphs, opts, prevCallbacks);
          }
          if (opts.selection) {
            attachSelectionHandlers(dygraphs, prevCallbacks);
          }
        }
      });
    }
    return {
      detach: function detach() {
        for (var i = 0; i < dygraphs.length; i++) {
          var g = dygraphs[i];
          if (opts.zoom) {
            g.updateOptions({
              drawCallback: prevCallbacks[i].drawCallback
            });
          }
          if (opts.selection) {
            g.updateOptions({
              highlightCallback: prevCallbacks[i].highlightCallback,
              unhighlightCallback: prevCallbacks[i].unhighlightCallback
            });
          }
        }
        // release references & make subsequent calls throw.
        dygraphs = null;
        opts = null;
        prevCallbacks = null;
      }
    };
  };
  function arraysAreEqual(a, b) {
    if (!Array.isArray(a) || !Array.isArray(b)) return false;
    var i = a.length;
    if (i !== b.length) return false;
    while (i--) {
      if (a[i] !== b[i]) return false;
    }
    return true;
  }
  function attachZoomHandlers(gs, syncOpts, prevCallbacks) {
    var block = false;
    for (var i = 0; i < gs.length; i++) {
      var g = gs[i];
      g.updateOptions({
        drawCallback: function synchronizer_drawCallback(me, initial) {
          if (block || initial) {
            // call the userâ€™s drawCallback even if we are blocked
            for (var j = 0; j < gs.length; j++) {
              if (gs[j] == me) {
                if (prevCallbacks[j] && prevCallbacks[j].drawCallback) {
                  prevCallbacks[j].drawCallback.apply(this, arguments);
                }
                break;
              }
            }
            return;
          }
          block = true;
          var opts = {
            dateWindow: me.xAxisRange()
          };
          if (syncOpts.range) opts.valueRange = me.yAxisRange();
          for (var _j = 0; _j < gs.length; _j++) {
            if (gs[_j] == me) {
              if (prevCallbacks[_j] && prevCallbacks[_j].drawCallback) {
                prevCallbacks[_j].drawCallback.apply(this, arguments);
              }
              continue;
            }

            // Only redraw if there are new options
            if (arraysAreEqual(opts.dateWindow, gs[_j].getOption('dateWindow')) && (!syncOpts.range || arraysAreEqual(opts.valueRange, gs[_j].getOption('valueRange')))) {
              continue;
            }
            gs[_j].updateOptions(opts);
          }
          block = false;
        }
      }, true /* no need to redraw */);
    }
  }

  function attachSelectionHandlers(gs, prevCallbacks) {
    var block = false;
    for (var i = 0; i < gs.length; i++) {
      var g = gs[i];
      g.updateOptions({
        highlightCallback: function synchronizer_highlightCallback(event, x, points, row, seriesName) {
          if (block) return;
          block = true;
          var me = this;
          for (var i = 0; i < gs.length; i++) {
            if (me == gs[i]) {
              if (prevCallbacks[i] && prevCallbacks[i].highlightCallback) {
                prevCallbacks[i].highlightCallback.apply(this, arguments);
              }
              continue;
            }
            var idx = gs[i].getRowForX(x);
            if (idx !== null) {
              gs[i].setSelection(idx, seriesName, undefined, true);
            }
          }
          block = false;
        },
        unhighlightCallback: function synchronizer_unhighlightCallback(event) {
          if (block) return;
          block = true;
          var me = this;
          for (var i = 0; i < gs.length; i++) {
            if (me == gs[i]) {
              if (prevCallbacks[i] && prevCallbacks[i].unhighlightCallback) {
                prevCallbacks[i].unhighlightCallback.apply(this, arguments);
              }
              continue;
            }
            gs[i].clearSelection();
          }
          block = false;
        }
      }, true /* no need to redraw */);
    }
  }

  Dygraph.synchronize = synchronize;

  /* closure and loader wrapper */
  Dygraph._required('dygraphs/src/extras/synchronizer.js', /* exports */{});
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXh0cmFzX3N5bmNocm9uaXplcl9jbG9zdXJlIiwiRHlncmFwaCIsIndpbmRvdyIsIm1vZHVsZSIsInJlcXVpcmUiLCJOQU1FIiwic3luY2hyb25pemUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJPUFRJT05TIiwib3B0cyIsInNlbGVjdGlvbiIsInpvb20iLCJyYW5nZSIsImR5Z3JhcGhzIiwicHJldkNhbGxiYWNrcyIsInBhcnNlT3B0cyIsIm9iaiIsIk9iamVjdCIsImkiLCJvcHROYW1lIiwiaGFzT3duUHJvcGVydHkiLCJwdXNoIiwicmVhZHljb3VudCIsImciLCJyZWFkeSIsIm9uUmVhZHlfIiwiY2FsbEJhY2tUeXBlcyIsImoiLCJrIiwiZ2V0RnVuY3Rpb25PcHRpb24iLCJhdHRhY2hab29tSGFuZGxlcnMiLCJhdHRhY2hTZWxlY3Rpb25IYW5kbGVycyIsImRldGFjaCIsInVwZGF0ZU9wdGlvbnMiLCJkcmF3Q2FsbGJhY2siLCJoaWdobGlnaHRDYWxsYmFjayIsInVuaGlnaGxpZ2h0Q2FsbGJhY2siLCJhcnJheXNBcmVFcXVhbCIsImEiLCJiIiwiQXJyYXkiLCJpc0FycmF5IiwiZ3MiLCJzeW5jT3B0cyIsImJsb2NrIiwic3luY2hyb25pemVyX2RyYXdDYWxsYmFjayIsIm1lIiwiaW5pdGlhbCIsImFwcGx5IiwiZGF0ZVdpbmRvdyIsInhBeGlzUmFuZ2UiLCJ2YWx1ZVJhbmdlIiwieUF4aXNSYW5nZSIsImdldE9wdGlvbiIsInN5bmNocm9uaXplcl9oaWdobGlnaHRDYWxsYmFjayIsImV2ZW50IiwieCIsInBvaW50cyIsInJvdyIsInNlcmllc05hbWUiLCJpZHgiLCJnZXRSb3dGb3JYIiwic2V0U2VsZWN0aW9uIiwidW5kZWZpbmVkIiwic3luY2hyb25pemVyX3VuaGlnaGxpZ2h0Q2FsbGJhY2siLCJjbGVhclNlbGVjdGlvbiIsIl9yZXF1aXJlZCJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9leHRyYXMvc3luY2hyb25pemVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIFBhcnQgb2YgZHlncmFwaHMsIHNlZSB0b3AtbGV2ZWwgTElDRU5TRS50eHQgZmlsZVxuICogTUlULWxpY2VuY2VkOiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICovXG5cbi8qKlxuICogU3luY2hyb25pemUgem9vbWluZyBhbmQvb3Igc2VsZWN0aW9ucyBiZXR3ZWVuIGEgc2V0IG9mIGR5Z3JhcGhzLlxuICpcbiAqIFVzYWdlOlxuICpcbiAqICAgdmFyIGcxID0gbmV3IER5Z3JhcGgoLi4uKSxcbiAqICAgICAgIGcyID0gbmV3IER5Z3JhcGgoLi4uKSxcbiAqICAgICAgIC4uLjtcbiAqICAgdmFyIHN5bmMgPSBEeWdyYXBoLnN5bmNocm9uaXplKGcxLCBnMiwgLi4uKTtcbiAqICAgLy8gY2hhcnRzIGFyZSBub3cgc3luY2hyb25pemVkXG4gKiAgIHN5bmMuZGV0YWNoKCk7XG4gKiAgIC8vIGNoYXJ0cyBhcmUgbm8gbG9uZ2VyIHN5bmNocm9uaXplZFxuICpcbiAqIFlvdSBjYW4gc2V0IG9wdGlvbnMgdXNpbmcgdGhlIGxhc3QgcGFyYW1ldGVyLCBmb3IgZXhhbXBsZTpcbiAqXG4gKiAgIHZhciBzeW5jID0gRHlncmFwaC5zeW5jaHJvbml6ZShnMSwgZzIsIGczLCB7XG4gKiAgICAgIHNlbGVjdGlvbjogdHJ1ZSxcbiAqICAgICAgem9vbTogdHJ1ZVxuICogICB9KTtcbiAqXG4gKiBUaGUgZGVmYXVsdCBpcyB0byBzeW5jaHJvbml6ZSBib3RoIG9mIHRoZXNlLlxuICpcbiAqIEluc3RlYWQgb2YgcGFzc2luZyBvbmUgRHlncmFwaCBvYmplY3QgYXMgZWFjaCBwYXJhbWV0ZXIsIHlvdSBtYXkgYWxzbyBwYXNzIGFuXG4gKiBhcnJheSBvZiBkeWdyYXBoczpcbiAqXG4gKiAgIHZhciBzeW5jID0gRHlncmFwaC5zeW5jaHJvbml6ZShbZzEsIGcyLCBnM10sIHtcbiAqICAgICAgc2VsZWN0aW9uOiBmYWxzZSxcbiAqICAgICAgem9vbTogdHJ1ZVxuICogICB9KTtcbiAqXG4gKiBZb3UgbWF5IGFsc28gc2V0IGByYW5nZTogZmFsc2VgIGlmIHlvdSB3aXNoIHRvIG9ubHkgc3luYyB0aGUgeC1heGlzLlxuICogVGhlIGByYW5nZWAgb3B0aW9uIGhhcyBubyBlZmZlY3QgdW5sZXNzIGB6b29tYCBpcyB0cnVlICh0aGUgZGVmYXVsdCkuXG4gKi9cblxuLyogbG9hZGVyIHdyYXBwZXIgdG8gYWxsb3cgYnJvd3NlciB1c2UgYW5kIEVTNiBpbXBvcnRzICovXG4oZnVuY3Rpb24gX2V4dHJhc19zeW5jaHJvbml6ZXJfY2xvc3VyZSgpIHtcbid1c2Ugc3RyaWN0JztcbnZhciBEeWdyYXBoO1xuaWYgKHdpbmRvdy5EeWdyYXBoKSB7XG4gIER5Z3JhcGggPSB3aW5kb3cuRHlncmFwaDtcbn0gZWxzZSBpZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gIER5Z3JhcGggPSByZXF1aXJlKCcuLi9keWdyYXBoJyk7XG4gIGlmICh0eXBlb2YoRHlncmFwaC5OQU1FKSA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mKER5Z3JhcGguZGVmYXVsdCkgIT09ICd1bmRlZmluZWQnKVxuICAgIER5Z3JhcGggPSBEeWdyYXBoLmRlZmF1bHQ7XG59XG4vKiBlbmQgb2YgbG9hZGVyIHdyYXBwZXIgaGVhZGVyICovXG5cbnZhciBzeW5jaHJvbml6ZSA9IGZ1bmN0aW9uIHN5bmNocm9uaXplKC8qIGR5Z3JhcGhzLi4uLCBvcHRzICovKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgJ0ludmFsaWQgaW52b2NhdGlvbiBvZiBEeWdyYXBoLnN5bmNocm9uaXplKCkuIE5lZWQgPj0gMSBhcmd1bWVudC4nO1xuICB9XG5cbiAgdmFyIE9QVElPTlMgPSBbJ3NlbGVjdGlvbicsICd6b29tJywgJ3JhbmdlJ107XG4gIHZhciBvcHRzID0ge1xuICAgIHNlbGVjdGlvbjogdHJ1ZSxcbiAgICB6b29tOiB0cnVlLFxuICAgIHJhbmdlOiB0cnVlXG4gIH07XG4gIHZhciBkeWdyYXBocyA9IFtdO1xuICB2YXIgcHJldkNhbGxiYWNrcyA9IFtdO1xuXG4gIHZhciBwYXJzZU9wdHMgPSBmdW5jdGlvbiBwYXJzZU9wdHMob2JqKSB7XG4gICAgaWYgKCEob2JqIGluc3RhbmNlb2YgT2JqZWN0KSkge1xuICAgICAgdGhyb3cgJ0xhc3QgYXJndW1lbnQgbXVzdCBiZSBlaXRoZXIgRHlncmFwaCBvciBPYmplY3QuJztcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBPUFRJT05TLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBvcHROYW1lID0gT1BUSU9OU1tpXTtcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShvcHROYW1lKSkgb3B0c1tvcHROYW1lXSA9IG9ialtvcHROYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgaWYgKGFyZ3VtZW50c1swXSBpbnN0YW5jZW9mIER5Z3JhcGgpIHtcbiAgICAvLyBBcmd1bWVudHMgYXJlIER5Z3JhcGggb2JqZWN0cy5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGFyZ3VtZW50c1tpXSBpbnN0YW5jZW9mIER5Z3JhcGgpIHtcbiAgICAgICAgZHlncmFwaHMucHVzaChhcmd1bWVudHNbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpIDwgYXJndW1lbnRzLmxlbmd0aCAtIDEpIHtcbiAgICAgIHRocm93ICdJbnZhbGlkIGludm9jYXRpb24gb2YgRHlncmFwaC5zeW5jaHJvbml6ZSgpLiAnICtcbiAgICAgICAgICAgICdBbGwgYnV0IHRoZSBsYXN0IGFyZ3VtZW50IG11c3QgYmUgRHlncmFwaCBvYmplY3RzLic7XG4gICAgfSBlbHNlIGlmIChpID09IGFyZ3VtZW50cy5sZW5ndGggLSAxKSB7XG4gICAgICBwYXJzZU9wdHMoYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGFyZ3VtZW50c1swXS5sZW5ndGgpIHtcbiAgICAvLyBJbnZva2VkIHcvIGxpc3Qgb2YgZHlncmFwaHMsIG9wdGlvbnNcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50c1swXS5sZW5ndGg7IGkrKykge1xuICAgICAgZHlncmFwaHMucHVzaChhcmd1bWVudHNbMF1baV0pO1xuICAgIH1cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAyKSB7XG4gICAgICBwYXJzZU9wdHMoYXJndW1lbnRzWzFdKTtcbiAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7XG4gICAgICB0aHJvdyAnSW52YWxpZCBpbnZvY2F0aW9uIG9mIER5Z3JhcGguc3luY2hyb25pemUoKS4gJyArXG4gICAgICAgICAgICAnRXhwZWN0ZWQgdHdvIGFyZ3VtZW50czogYXJyYXkgYW5kIG9wdGlvbmFsIG9wdGlvbnMgYXJndW1lbnQuJztcbiAgICB9ICAvLyBvdGhlcndpc2UgYXJndW1lbnRzLmxlbmd0aCA9PSAxLCB3aGljaCBpcyBmaW5lLlxuICB9IGVsc2Uge1xuICAgIHRocm93ICdJbnZhbGlkIGludm9jYXRpb24gb2YgRHlncmFwaC5zeW5jaHJvbml6ZSgpLiAnICtcbiAgICAgICAgICAnRmlyc3QgcGFyYW1ldGVyIG11c3QgYmUgZWl0aGVyIER5Z3JhcGggb3IgbGlzdCBvZiBEeWdyYXBocy4nO1xuICB9XG5cbiAgaWYgKGR5Z3JhcGhzLmxlbmd0aCA8IDIpIHtcbiAgICB0aHJvdyAnSW52YWxpZCBpbnZvY2F0aW9uIG9mIER5Z3JhcGguc3luY2hyb25pemUoKS4gJyArXG4gICAgICAgICAgJ05lZWQgdHdvIG9yIG1vcmUgZHlncmFwaHMgdG8gc3luY2hyb25pemUuJztcbiAgfVxuXG4gIHZhciByZWFkeWNvdW50ID0gZHlncmFwaHMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGR5Z3JhcGhzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGcgPSBkeWdyYXBoc1tpXTtcbiAgICBnLnJlYWR5KGZ1bmN0aW9uIG9uUmVhZHlfKCkge1xuICAgICAgaWYgKC0tcmVhZHljb3VudCA9PSAwKSB7XG4gICAgICAgIC8vIHN0b3JlIG9yaWdpbmFsIGNhbGxiYWNrc1xuICAgICAgICB2YXIgY2FsbEJhY2tUeXBlcyA9IFsnZHJhd0NhbGxiYWNrJywgJ2hpZ2hsaWdodENhbGxiYWNrJywgJ3VuaGlnaGxpZ2h0Q2FsbGJhY2snXTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkeWdyYXBocy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGlmICghcHJldkNhbGxiYWNrc1tqXSkge1xuICAgICAgICAgICAgcHJldkNhbGxiYWNrc1tqXSA9IHt9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKHZhciBrID0gY2FsbEJhY2tUeXBlcy5sZW5ndGggLSAxOyBrID49IDA7IGstLSkge1xuICAgICAgICAgICAgcHJldkNhbGxiYWNrc1tqXVtjYWxsQmFja1R5cGVzW2tdXSA9IGR5Z3JhcGhzW2pdLmdldEZ1bmN0aW9uT3B0aW9uKGNhbGxCYWNrVHlwZXNba10pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExpc3RlbiBmb3IgZHJhdywgaGlnaGxpZ2h0LCB1bmhpZ2hsaWdodCBjYWxsYmFja3MuXG4gICAgICAgIGlmIChvcHRzLnpvb20pIHtcbiAgICAgICAgICBhdHRhY2hab29tSGFuZGxlcnMoZHlncmFwaHMsIG9wdHMsIHByZXZDYWxsYmFja3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdHMuc2VsZWN0aW9uKSB7XG4gICAgICAgICAgYXR0YWNoU2VsZWN0aW9uSGFuZGxlcnMoZHlncmFwaHMsIHByZXZDYWxsYmFja3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGRldGFjaDogZnVuY3Rpb24gZGV0YWNoKCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkeWdyYXBocy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZyA9IGR5Z3JhcGhzW2ldO1xuICAgICAgICBpZiAob3B0cy56b29tKSB7XG4gICAgICAgICAgZy51cGRhdGVPcHRpb25zKHtkcmF3Q2FsbGJhY2s6IHByZXZDYWxsYmFja3NbaV0uZHJhd0NhbGxiYWNrfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuc2VsZWN0aW9uKSB7XG4gICAgICAgICAgZy51cGRhdGVPcHRpb25zKHtcbiAgICAgICAgICAgIGhpZ2hsaWdodENhbGxiYWNrOiBwcmV2Q2FsbGJhY2tzW2ldLmhpZ2hsaWdodENhbGxiYWNrLFxuICAgICAgICAgICAgdW5oaWdobGlnaHRDYWxsYmFjazogcHJldkNhbGxiYWNrc1tpXS51bmhpZ2hsaWdodENhbGxiYWNrXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIHJlbGVhc2UgcmVmZXJlbmNlcyAmIG1ha2Ugc3Vic2VxdWVudCBjYWxscyB0aHJvdy5cbiAgICAgIGR5Z3JhcGhzID0gbnVsbDtcbiAgICAgIG9wdHMgPSBudWxsO1xuICAgICAgcHJldkNhbGxiYWNrcyA9IG51bGw7XG4gICAgfVxuICB9O1xufTtcblxuZnVuY3Rpb24gYXJyYXlzQXJlRXF1YWwoYSwgYikge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoYSkgfHwgIUFycmF5LmlzQXJyYXkoYikpIHJldHVybiBmYWxzZTtcbiAgdmFyIGkgPSBhLmxlbmd0aDtcbiAgaWYgKGkgIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAoYVtpXSAhPT0gYltpXSkgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBhdHRhY2hab29tSGFuZGxlcnMoZ3MsIHN5bmNPcHRzLCBwcmV2Q2FsbGJhY2tzKSB7XG4gIHZhciBibG9jayA9IGZhbHNlO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGdzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGcgPSBnc1tpXTtcbiAgICBnLnVwZGF0ZU9wdGlvbnMoe1xuICAgICAgZHJhd0NhbGxiYWNrOiBmdW5jdGlvbiBzeW5jaHJvbml6ZXJfZHJhd0NhbGxiYWNrKG1lLCBpbml0aWFsKSB7XG4gICAgICAgIGlmIChibG9jayB8fCBpbml0aWFsKSB7XG4gICAgICAgICAgLy8gY2FsbCB0aGUgdXNlcuKAmXMgZHJhd0NhbGxiYWNrIGV2ZW4gaWYgd2UgYXJlIGJsb2NrZWRcbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoZ3Nbal0gPT0gbWUpIHtcbiAgICAgICAgICAgICAgaWYgKHByZXZDYWxsYmFja3Nbal0gJiYgcHJldkNhbGxiYWNrc1tqXS5kcmF3Q2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBwcmV2Q2FsbGJhY2tzW2pdLmRyYXdDYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBibG9jayA9IHRydWU7XG4gICAgICAgIHZhciBvcHRzID0ge1xuICAgICAgICAgIGRhdGVXaW5kb3c6IG1lLnhBeGlzUmFuZ2UoKVxuICAgICAgICB9O1xuICAgICAgICBpZiAoc3luY09wdHMucmFuZ2UpXG4gICAgICAgICAgb3B0cy52YWx1ZVJhbmdlID0gbWUueUF4aXNSYW5nZSgpO1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ3MubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBpZiAoZ3Nbal0gPT0gbWUpIHtcbiAgICAgICAgICAgIGlmIChwcmV2Q2FsbGJhY2tzW2pdICYmIHByZXZDYWxsYmFja3Nbal0uZHJhd0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgIHByZXZDYWxsYmFja3Nbal0uZHJhd0NhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBPbmx5IHJlZHJhdyBpZiB0aGVyZSBhcmUgbmV3IG9wdGlvbnNcbiAgICAgICAgICBpZiAoYXJyYXlzQXJlRXF1YWwob3B0cy5kYXRlV2luZG93LCBnc1tqXS5nZXRPcHRpb24oJ2RhdGVXaW5kb3cnKSkgJiZcbiAgICAgICAgICAgICAgKCFzeW5jT3B0cy5yYW5nZSB8fFxuICAgICAgICAgICAgICAgYXJyYXlzQXJlRXF1YWwob3B0cy52YWx1ZVJhbmdlLCBnc1tqXS5nZXRPcHRpb24oJ3ZhbHVlUmFuZ2UnKSkpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBnc1tqXS51cGRhdGVPcHRpb25zKG9wdHMpO1xuICAgICAgICB9XG4gICAgICAgIGJsb2NrID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSwgdHJ1ZSAvKiBubyBuZWVkIHRvIHJlZHJhdyAqLyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXR0YWNoU2VsZWN0aW9uSGFuZGxlcnMoZ3MsIHByZXZDYWxsYmFja3MpIHtcbiAgdmFyIGJsb2NrID0gZmFsc2U7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZ3MubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZyA9IGdzW2ldO1xuXG4gICAgZy51cGRhdGVPcHRpb25zKHtcbiAgICAgIGhpZ2hsaWdodENhbGxiYWNrOiBmdW5jdGlvbiBzeW5jaHJvbml6ZXJfaGlnaGxpZ2h0Q2FsbGJhY2soZXZlbnQsIHgsIHBvaW50cywgcm93LCBzZXJpZXNOYW1lKSB7XG4gICAgICAgIGlmIChibG9jaykgcmV0dXJuO1xuICAgICAgICBibG9jayA9IHRydWU7XG4gICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAobWUgPT0gZ3NbaV0pIHtcbiAgICAgICAgICAgIGlmIChwcmV2Q2FsbGJhY2tzW2ldICYmIHByZXZDYWxsYmFja3NbaV0uaGlnaGxpZ2h0Q2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgcHJldkNhbGxiYWNrc1tpXS5oaWdobGlnaHRDYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBpZHggPSBnc1tpXS5nZXRSb3dGb3JYKHgpO1xuICAgICAgICAgIGlmIChpZHggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGdzW2ldLnNldFNlbGVjdGlvbihpZHgsIHNlcmllc05hbWUsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJsb2NrID0gZmFsc2U7XG4gICAgICB9LFxuICAgICAgdW5oaWdobGlnaHRDYWxsYmFjazogZnVuY3Rpb24gc3luY2hyb25pemVyX3VuaGlnaGxpZ2h0Q2FsbGJhY2soZXZlbnQpIHtcbiAgICAgICAgaWYgKGJsb2NrKSByZXR1cm47XG4gICAgICAgIGJsb2NrID0gdHJ1ZTtcbiAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChtZSA9PSBnc1tpXSkge1xuICAgICAgICAgICAgaWYgKHByZXZDYWxsYmFja3NbaV0gJiYgcHJldkNhbGxiYWNrc1tpXS51bmhpZ2hsaWdodENhbGxiYWNrKSB7XG4gICAgICAgICAgICAgIHByZXZDYWxsYmFja3NbaV0udW5oaWdobGlnaHRDYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGdzW2ldLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgYmxvY2sgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9LCB0cnVlIC8qIG5vIG5lZWQgdG8gcmVkcmF3ICovKTtcbiAgfVxufVxuXG5EeWdyYXBoLnN5bmNocm9uaXplID0gc3luY2hyb25pemU7XG5cbi8qIGNsb3N1cmUgYW5kIGxvYWRlciB3cmFwcGVyICovXG5EeWdyYXBoLl9yZXF1aXJlZCgnZHlncmFwaHMvc3JjL2V4dHJhcy9zeW5jaHJvbml6ZXIuanMnLCAvKiBleHBvcnRzICovIHt9KTtcbn0pKCk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDLFNBQVNBLDRCQUE0QixHQUFHO0VBQ3pDLFlBQVk7O0VBQ1osSUFBSUMsT0FBTztFQUNYLElBQUlDLE1BQU0sQ0FBQ0QsT0FBTyxFQUFFO0lBQ2xCQSxPQUFPLEdBQUdDLE1BQU0sQ0FBQ0QsT0FBTztFQUMxQixDQUFDLE1BQU0sSUFBSSxPQUFPRSxNQUFPLEtBQUssV0FBVyxFQUFFO0lBQ3pDRixPQUFPLEdBQUdHLE9BQU8sQ0FBQyxZQUFZLENBQUM7SUFDL0IsSUFBSSxPQUFPSCxPQUFPLENBQUNJLElBQUssS0FBSyxXQUFXLElBQUksT0FBT0osT0FBTyxXQUFTLEtBQUssV0FBVyxFQUNqRkEsT0FBTyxHQUFHQSxPQUFPLFdBQVE7RUFDN0I7RUFDQTs7RUFFQSxJQUFJSyxXQUFXLEdBQUcsU0FBU0EsV0FBVyxFQUFDO0VBQUEsRUFBeUI7SUFDOUQsSUFBSUMsU0FBUyxDQUFDQyxNQUFNLEtBQUssQ0FBQyxF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