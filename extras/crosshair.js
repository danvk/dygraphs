"use strict";

/**
 * @license
 * Copyright 2015 Petr Shevtsov (petr.shevtsov@gmail.com)
 * MIT-licenced: https://opensource.org/licenses/MIT
 */

/* loader wrapper to allow browser use and ES6 imports */
(function _extras_crosshair_wrapper() {
  'use strict';

  var Dygraph;
  if (window.Dygraph) {
    Dygraph = window.Dygraph;
  } else if (typeof module !== 'undefined') {
    Dygraph = require('../dygraph');
    if (typeof Dygraph.NAME === 'undefined' && typeof Dygraph["default"] !== 'undefined') Dygraph = Dygraph["default"];
  }
  /* end of loader wrapper header */

  Dygraph.Plugins.Crosshair = function _extras_crosshair_closure() {
    "use strict";

    /**
     * Creates the crosshair
     *
     * @constructor
     */
    var crosshair = function crosshair(opt_options) {
      this.canvas_ = document.createElement("canvas");
      opt_options = opt_options || {};
      this.direction_ = opt_options.direction || null;
      this.strokeStyle_ = opt_options.strokeStyle || "rgba(0, 0, 0, 0.3)";
    };
    crosshair.prototype.toString = function toString() {
      return "Crosshair Plugin";
    };

    /**
     * @param {Dygraph} g Graph instance.
     * @return {object.<string, function(ev)>} Mapping of event names to callbacks.
     */
    crosshair.prototype.activate = function activate(g) {
      g.graphDiv.appendChild(this.canvas_);
      return {
        select: this.select,
        deselect: this.deselect
      };
    };
    crosshair.prototype.select = function select(e) {
      if (this.direction_ === null) {
        return;
      }
      var width = e.dygraph.width_;
      var height = e.dygraph.height_;
      this.canvas_.width = width;
      this.canvas_.height = height;
      this.canvas_.style.width = width + "px"; // for IE
      this.canvas_.style.height = height + "px"; // for IE

      var ctx = this.canvas_.getContext("2d");
      ctx.clearRect(0, 0, width, height);
      ctx.strokeStyle = this.strokeStyle_;
      ctx.beginPath();
      var canvasx = Math.floor(e.dygraph.selPoints_[0].canvasx) + 0.5; // crisper rendering

      if (this.direction_ === "vertical" || this.direction_ === "both") {
        ctx.moveTo(canvasx, 0);
        ctx.lineTo(canvasx, height);
      }
      if (this.direction_ === "horizontal" || this.direction_ === "both") {
        for (var i = 0; i < e.dygraph.selPoints_.length; i++) {
          var canvasy = Math.floor(e.dygraph.selPoints_[i].canvasy) + 0.5; // crisper rendering
          ctx.moveTo(0, canvasy);
          ctx.lineTo(width, canvasy);
        }
      }
      ctx.stroke();
      ctx.closePath();
    };
    crosshair.prototype.deselect = function deselect(e) {
      var ctx = this.canvas_.getContext("2d");
      ctx.clearRect(0, 0, this.canvas_.width, this.canvas_.height);
    };
    crosshair.prototype.destroy = function destroy() {
      this.canvas_ = null;
    };
    return crosshair;
  }();

  /* loader wrapper */
  Dygraph._required('dygraphs/src/extras/crosshair.js', /* exports */{});
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXh0cmFzX2Nyb3NzaGFpcl93cmFwcGVyIiwiRHlncmFwaCIsIndpbmRvdyIsIm1vZHVsZSIsInJlcXVpcmUiLCJOQU1FIiwiUGx1Z2lucyIsIkNyb3NzaGFpciIsIl9leHRyYXNfY3Jvc3NoYWlyX2Nsb3N1cmUiLCJjcm9zc2hhaXIiLCJvcHRfb3B0aW9ucyIsImNhbnZhc18iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJkaXJlY3Rpb25fIiwiZGlyZWN0aW9uIiwic3Ryb2tlU3R5bGVfIiwic3Ryb2tlU3R5bGUiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImFjdGl2YXRlIiwiZyIsImdyYXBoRGl2IiwiYXBwZW5kQ2hpbGQiLCJzZWxlY3QiLCJkZXNlbGVjdCIsImUiLCJ3aWR0aCIsImR5Z3JhcGgiLCJ3aWR0aF8iLCJoZWlnaHQiLCJoZWlnaHRfIiwic3R5bGUiLCJjdHgiLCJnZXRDb250ZXh0IiwiY2xlYXJSZWN0IiwiYmVnaW5QYXRoIiwiY2FudmFzeCIsIk1hdGgiLCJmbG9vciIsInNlbFBvaW50c18iLCJtb3ZlVG8iLCJsaW5lVG8iLCJpIiwibGVuZ3RoIiwiY2FudmFzeSIsInN0cm9rZSIsImNsb3NlUGF0aCIsImRlc3Ryb3kiLCJfcmVxdWlyZWQiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvZXh0cmFzL2Nyb3NzaGFpci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNSBQZXRyIFNoZXZ0c292IChwZXRyLnNoZXZ0c292QGdtYWlsLmNvbSlcbiAqIE1JVC1saWNlbmNlZDogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqL1xuXG4vKiBsb2FkZXIgd3JhcHBlciB0byBhbGxvdyBicm93c2VyIHVzZSBhbmQgRVM2IGltcG9ydHMgKi9cbihmdW5jdGlvbiBfZXh0cmFzX2Nyb3NzaGFpcl93cmFwcGVyKCkge1xuJ3VzZSBzdHJpY3QnO1xudmFyIER5Z3JhcGg7XG5pZiAod2luZG93LkR5Z3JhcGgpIHtcbiAgRHlncmFwaCA9IHdpbmRvdy5EeWdyYXBoO1xufSBlbHNlIGlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgRHlncmFwaCA9IHJlcXVpcmUoJy4uL2R5Z3JhcGgnKTtcbiAgaWYgKHR5cGVvZihEeWdyYXBoLk5BTUUpID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YoRHlncmFwaC5kZWZhdWx0KSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgRHlncmFwaCA9IER5Z3JhcGguZGVmYXVsdDtcbn1cbi8qIGVuZCBvZiBsb2FkZXIgd3JhcHBlciBoZWFkZXIgKi9cblxuRHlncmFwaC5QbHVnaW5zLkNyb3NzaGFpciA9IChmdW5jdGlvbiBfZXh0cmFzX2Nyb3NzaGFpcl9jbG9zdXJlKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICAvKipcbiAgICogQ3JlYXRlcyB0aGUgY3Jvc3NoYWlyXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cblxuICB2YXIgY3Jvc3NoYWlyID0gZnVuY3Rpb24gY3Jvc3NoYWlyKG9wdF9vcHRpb25zKSB7XG4gICAgdGhpcy5jYW52YXNfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICBvcHRfb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgIHRoaXMuZGlyZWN0aW9uXyA9IG9wdF9vcHRpb25zLmRpcmVjdGlvbiB8fCBudWxsO1xuICAgIHRoaXMuc3Ryb2tlU3R5bGVfID0gb3B0X29wdGlvbnMuc3Ryb2tlU3R5bGUgfHwgXCJyZ2JhKDAsIDAsIDAsIDAuMylcIjtcbiAgfTtcblxuICBjcm9zc2hhaXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIFwiQ3Jvc3NoYWlyIFBsdWdpblwiO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0R5Z3JhcGh9IGcgR3JhcGggaW5zdGFuY2UuXG4gICAqIEByZXR1cm4ge29iamVjdC48c3RyaW5nLCBmdW5jdGlvbihldik+fSBNYXBwaW5nIG9mIGV2ZW50IG5hbWVzIHRvIGNhbGxiYWNrcy5cbiAgICovXG4gIGNyb3NzaGFpci5wcm90b3R5cGUuYWN0aXZhdGUgPSBmdW5jdGlvbiBhY3RpdmF0ZShnKSB7XG4gICAgZy5ncmFwaERpdi5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhc18pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHNlbGVjdDogdGhpcy5zZWxlY3QsXG4gICAgICBkZXNlbGVjdDogdGhpcy5kZXNlbGVjdFxuICAgIH07XG4gIH07XG5cbiAgY3Jvc3NoYWlyLnByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbiBzZWxlY3QoZSkge1xuICAgIGlmICh0aGlzLmRpcmVjdGlvbl8gPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgd2lkdGggPSBlLmR5Z3JhcGgud2lkdGhfO1xuICAgIHZhciBoZWlnaHQgPSBlLmR5Z3JhcGguaGVpZ2h0XztcbiAgICB0aGlzLmNhbnZhc18ud2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLmNhbnZhc18uaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuY2FudmFzXy5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiOyAgICAvLyBmb3IgSUVcbiAgICB0aGlzLmNhbnZhc18uc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiOyAgLy8gZm9yIElFXG5cbiAgICB2YXIgY3R4ID0gdGhpcy5jYW52YXNfLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgIGN0eC5zdHJva2VTdHlsZSA9IHRoaXMuc3Ryb2tlU3R5bGVfO1xuICAgIGN0eC5iZWdpblBhdGgoKTtcblxuICAgIHZhciBjYW52YXN4ID0gTWF0aC5mbG9vcihlLmR5Z3JhcGguc2VsUG9pbnRzX1swXS5jYW52YXN4KSArIDAuNTsgLy8gY3Jpc3BlciByZW5kZXJpbmdcblxuICAgIGlmICh0aGlzLmRpcmVjdGlvbl8gPT09IFwidmVydGljYWxcIiB8fCB0aGlzLmRpcmVjdGlvbl8gPT09IFwiYm90aFwiKSB7XG4gICAgICBjdHgubW92ZVRvKGNhbnZhc3gsIDApO1xuICAgICAgY3R4LmxpbmVUbyhjYW52YXN4LCBoZWlnaHQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmRpcmVjdGlvbl8gPT09IFwiaG9yaXpvbnRhbFwiIHx8IHRoaXMuZGlyZWN0aW9uXyA9PT0gXCJib3RoXCIpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZS5keWdyYXBoLnNlbFBvaW50c18ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGNhbnZhc3kgPSBNYXRoLmZsb29yKGUuZHlncmFwaC5zZWxQb2ludHNfW2ldLmNhbnZhc3kpICsgMC41OyAvLyBjcmlzcGVyIHJlbmRlcmluZ1xuICAgICAgICBjdHgubW92ZVRvKDAsIGNhbnZhc3kpO1xuICAgICAgICBjdHgubGluZVRvKHdpZHRoLCBjYW52YXN5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjdHguc3Ryb2tlKCk7XG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuICB9O1xuXG4gIGNyb3NzaGFpci5wcm90b3R5cGUuZGVzZWxlY3QgPSBmdW5jdGlvbiBkZXNlbGVjdChlKSB7XG4gICAgdmFyIGN0eCA9IHRoaXMuY2FudmFzXy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhc18ud2lkdGgsIHRoaXMuY2FudmFzXy5oZWlnaHQpO1xuICB9O1xuXG4gIGNyb3NzaGFpci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5jYW52YXNfID0gbnVsbDtcbiAgfTtcblxuICByZXR1cm4gY3Jvc3NoYWlyO1xufSkoKTtcblxuLyogbG9hZGVyIHdyYXBwZXIgKi9cbkR5Z3JhcGguX3JlcXVpcmVkKCdkeWdyYXBocy9zcmMvZXh0cmFzL2Nyb3NzaGFpci5qcycsIC8qIGV4cG9y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